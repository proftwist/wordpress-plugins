(()=>{"use strict";var e,a={112:()=>{const e=window.wp.i18n,a=window.wp.blocks,n=window.React,t=window.wp.element,l=window.wp.blockEditor,o=window.wp.components,s=window.easyChangelogI18n||{};(0,a.registerBlockType)("easy-changelog/changelog",{title:(0,e.__)("Easy Changelog","easy-changelog"),description:(0,e.__)("Блок для отображения changelog с редактором JSON и предпросмотром","easy-changelog"),category:"easy-changelog",icon:"list-view",supports:{html:!1},attributes:{changelogData:{type:"string",default:'[\n  {\n    "version": "1.0.0",\n    "date": "19.11.2025",\n    "added": ["Первоначальный релиз плагина", "Базовая функциональность блоков"],\n    "fixed": ["Исправлена ошибка валидации JSON", "Улучшена обработка дат"]\n  },\n  {\n    "version": "0.9.0",\n    "date": "15.11.2025",\n    "added": ["Бета-версия плагина", "Тестирование функциональности"],\n    "fixed": ["Устранены проблемы с локализацией"]\n  }\n]'}},edit:({attributes:a,setAttributes:r})=>{const{changelogData:c}=a,[g,i]=(0,t.useState)([]),[d,h]=(0,t.useState)("");(0,t.useEffect)(()=>{try{const a=JSON.parse(c);Array.isArray(a)?(i(a),h("")):h(s.mustBeArray||(0,e.__)("Данные должны быть массивом","easy-changelog"))}catch(a){h(s.invalidJson||(0,e.__)("Некорректный JSON формат","easy-changelog"))}},[c]);const y=[{name:"editor",title:s.jsonEditor||(0,e.__)("Редактор JSON","easy-changelog")},{name:"preview",title:s.preview||(0,e.__)("Предпросмотр","easy-changelog")}],m=(e,a="added")=>Array.isArray(e)&&0!==e.length?(0,n.createElement)("ul",{className:`easy-changelog-${a}`},e.map((e,t)=>(0,n.createElement)("li",{key:t,className:`easy-changelog-item easy-changelog-item-${a}`},e))):null;return(0,n.createElement)("div",{...(0,l.useBlockProps)()},(0,n.createElement)(o.TabPanel,{className:"easy-changelog-tabs",tabs:y},a=>(0,n.createElement)("div",{className:"easy-changelog-tab-content"},"editor"===a.name&&(0,n.createElement)("div",null,(0,n.createElement)(o.TextareaControl,{label:s.changelogData||(0,e.__)("Данные Changelog (JSON)","easy-changelog"),value:c,onChange:e=>r({changelogData:e}),rows:15,help:s.jsonHelp||(0,e.__)("Введите данные в формате JSON. Каждый релиз должен содержать version, date, added и fixed.","easy-changelog")}),d&&(0,n.createElement)("div",{style:{color:"#cc1818",marginTop:"10px"}},s.error||(0,e.__)("Ошибка:","easy-changelog")," ",d)),"preview"===a.name&&(0,n.createElement)("div",{className:"easy-changelog-block easy-changelog-preview"},d?(0,n.createElement)("div",{style:{color:"#cc1818"}},s.cannotPreview||(0,e.__)("Невозможно отобразить предпросмотр из-за ошибок в JSON","easy-changelog")):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h2",{className:"easy-changelog-title"},s.changelogTitle||(0,e.__)("История изменений","easy-changelog")),g.map((e,a)=>(0,n.createElement)("div",{key:a,className:"easy-changelog-release"},(0,n.createElement)("div",{className:"easy-changelog-version"},(0,n.createElement)("strong",null,e.version)),(0,n.createElement)("div",{className:"easy-changelog-date"},e.date),(0,n.createElement)("div",{className:"easy-changelog-content"},m(e.added,"added"),m(e.fixed,"fixed")))))))))},save:()=>null})}},n={};function t(e){var l=n[e];if(void 0!==l)return l.exports;var o=n[e]={exports:{}};return a[e](o,o.exports,t),o.exports}t.m=a,e=[],t.O=(a,n,l,o)=>{if(!n){var s=1/0;for(i=0;i<e.length;i++){for(var[n,l,o]=e[i],r=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(t.O).every(e=>t.O[e](n[c]))?n.splice(c--,1):(r=!1,o<s&&(s=o));if(r){e.splice(i--,1);var g=l();void 0!==g&&(a=g)}}return a}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[n,l,o]},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};t.O.j=a=>0===e[a];var a=(a,n)=>{var l,o,[s,r,c]=n,g=0;if(s.some(a=>0!==e[a])){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(c)var i=c(t)}for(a&&a(n);g<s.length;g++)o=s[g],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(i)},n=globalThis.webpackChunkeasy_changelog=globalThis.webpackChunkeasy_changelog||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))})();var l=t.O(void 0,[350],()=>t(112));l=t.O(l)})();