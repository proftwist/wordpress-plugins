# Easy Changelog - Пояснительная записка

## Описание
Плагин Easy Changelog создан для WordPress с использованием блоков Гутенберга. Позволяет создавать красивые истории изменений с возможностью ввода данных в формате JSON и предпросмотром.

**Версия: 1.0.1** - Исправлены проблемы с интерфейсом и локализацией, синхронизированы версии

## Структура плагина
```
easy-changelog/
├── easy-changelog.php             # Основной файл плагина (обновлен до версии 1.0.1)
├── package.json                   # Конфигурация npm для сборки (версия 1.0.1)
├── webpack.config.js              # Конфигурация webpack
├── build/                         # Скомпилированные файлы
│   ├── index.js                   # JavaScript блока
│   ├── index.asset.php            # Зависимости для WordPress
│   ├── style-index.css            # Скомпилированные стили
│   ├── style-index-rtl.css        # Стили для RTL языков
│   ├── easy-changelog-en_US.json  # JSON переводы (английский)
│   └── easy-changelog-ru_RU.json  # JSON переводы (русский)
├── src/                           # Исходный код
│   ├── index.js                   # Регистрация блока (упрощен)
│   └── style.scss                 # Стили блока (обновлены)
└── languages/                     # Файлы переводов
    ├── easy-changelog-ru_RU.po    # Русские переводы
    ├── easy-changelog-ru_RU.mo    # Русские переводы (скомпилированные)
    ├── easy-changelog-en_US.po    # Английские переводы
    └── easy-changelog-en_US.mo    # Английские переводы (скомпилированные)
```

## Основные функции
- **Блок Гутенберга** для отображения истории изменений
- **JSON редактор** для ввода данных
- **Вкладка предпросмотра** с живым отображением
- **Валидация JSON** в реальном времени
- **Адаптивный дизайн** для всех устройств
- **Поддержка RTL** для языков с письмом справа налево
- **Полная локализация** на русский и английский языки
- **Пробел между версией и датой** (CSS gap)
- **Версия выделена полужирным**
- **Российский формат дат** (DD.MM.YYYY)

## Технические детали
- Использует WordPress Scripts (@wordpress/scripts)
- Совместимость с WordPress 5.8+
- SCSS для стилизации
- Компоненты WordPress для интерфейса
- Поддержка современного JavaScript (ES6+)
- API версия 2 для блоков WordPress
- Правильная локализация через wp_set_script_translations()

## Основные исправления в версии 1.0.1

### 1. Синхронизация версий
✅ **Исправлено несоответствие версий:**
- В PHP файле: версия 1.0.1
- В package.json: обновлено с 1.0.0 до 1.0.1
- Константа EASY_CHANGELOG_VERSION: '1.0.1'

### 2. Интерфейс
✅ **Добавлен пробел между версией и датой:**
- В CSS добавлен `gap: 2rem` для `.easy-changelog-header`
- На мобильных устройствах `gap: 1rem`

✅ **Версия выделена полужирным:**
- В PHP: `<strong class="easy-changelog-version">`
- В JavaScript: `<strong className="easy-changelog-version">`
- В CSS: `font-weight: 700`

### 3. Форматирование дат
✅ **Российский формат дат DD.MM.YYYY:**
- PHP функция `format_date()` в easy-changelog.php
- JavaScript функция `formatDate()` в src/edit.js
- Применяется как в редакторе, так и на фронтенде

### 4. Локализация
✅ **Исправлена локализация:**
- Удалена сложная логика загрузки переводов из JavaScript
- Добавлена правильная регистрация переводов через `wp_set_script_translations()`
- JSON файлы переводов обновлены с указанием `build/index.js` как источника
- Добавлены недостающие переводы
- Автоматическое определение локали WordPress

### 5. Архитектура
✅ **Упрощена регистрация блока:**
- Удалена встроенная логика локализации из src/index.js
- Оставлена только базовая регистрация блока
- Локализация обрабатывается на уровне PHP

## Формат данных JSON
```json
[
    {
        "version": "1.0.0",
        "date": "2024-01-15",
        "added": [
            "Initial release of the plugin",
            "Basic changelog functionality"
        ]
    }
]
```

## Безопасность
- Все выходные данные экранируются
- Валидация JSON перед рендерингом
- Защита от прямого доступа к файлам
- Проверка существования обязательных полей

## Стилизация
- Современный дизайн с тенями и анимациями
- Цветовая схема на основе синего (#007cba)
- Адаптивная верстка для мобильных устройств
- Hover-эффекты и плавные переходы
- **CSS Grid и Flexbox** для гибкой верстки
- **Пробел между элементами** через gap

## Зависимости
### Разработка
- @wordpress/scripts: ^25.0.0

### Основные зависимости
- @wordpress/components: ^25.0.0
- @wordpress/element: ^5.0.0
- @wordpress/block-editor: ^12.0.0
- @wordpress/blocks: ^12.0.0
- @wordpress/i18n: ^4.0.0

## Возможности расширения
- Добавление новых категорий изменений (изменено, исправлено, удалено)
- Настройка цветовой схемы
- Импорт из популярных форматов чейнджлогов
- Экспорт данных
- Поддержка дополнительных языков

## Файлы переводов
### PHP переводы
- `languages/easy-changelog-ru_RU.po` - Русские переводы
- `languages/easy-changelog-ru_RU.mo` - Русские переводы (скомпилированные)
- `languages/easy-changelog-en_US.po` - Английские переводы
- `languages/easy-changelog-en_US.mo` - Английские переводы (скомпилированные)

### JavaScript переводы
- `build/easy-changelog-ru_RU.json` - Русские переводы для блока
- `build/easy-changelog-en_US.json` - Английские переводы для блока