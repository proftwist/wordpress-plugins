# Пояснительная записка к плагину Easy Changelog

## Описание проекта

Плагин Easy Changelog представляет собой WordPress блок для отображения истории изменений (changelog) с интуитивным редактором JSON и встроенным предпросмотром.

## Техническая реализация

### Архитектура
- **Базовый язык**: PHP 7.4+
- **Frontend**: React 18+ с использованием @wordpress/components
- **Сборка**: WordPress Scripts (@wordpress/scripts)
- **Стили**: SCSS с автопрефиксером
- **Локализация**: WordPress i18n с поддержкой русского и английского языков

### Компоненты системы

#### 1. Основной PHP класс (easy-changelog.php)
- Регистрация Gutenberg блока
- Рендеринг блока на фронтенде
- Подключение локализации
- Добавление категории блоков

#### 2. React компоненты (src/)
- **index.js**: Регистрация блока с атрибутами
- **edit.js**: Интерфейс редактирования с вкладками
- **style.scss**: Стили для редактора и фронтенда

#### 3. Система локализации (languages/)
- **easy-changelog-ru_RU.po**: Русская локализация
- **easy-changelog-en_US.po**: Английская локализация

## Ключевые особенности

### Функциональность редактора
- Двухвкладочный интерфейс: "Редактор JSON" и "Предпросмотр"
- Валидация JSON в реальном времени
- Автоматическое обновление предпросмотра
- Обработка ошибок с понятными сообщениями

### Безопасность
- Экранирование всех выводимых данных (esc_html)
- Валидация JSON данных перед рендерингом
- Проверка наличия Gutenberg перед регистрацией блока

### Производительность
- Ленивая загрузка фронтенд стилей
- Минимальное количество зависимостей
- Оптимизированная сборка через WordPress Scripts

## Технологический стек

### Зависимости времени выполнения
```json
{
  "@wordpress/blocks": "^12.0.0",
  "@wordpress/block-editor": "^11.0.0",
  "@wordpress/components": "^23.0.0",
  "@wordpress/element": "^5.0.0",
  "@wordpress/i18n": "^4.0.0"
}
```

### Зависимости разработки
```json
{
  "@wordpress/scripts": "^25.0.0"
}
```

## Структура данных

### Формат JSON для changelog
```json
[
  {
    "version": "1.0.0",
    "date": "19.11.2025",
    "added": ["Описание изменения 1", "Описание изменения 2"]
  }
]
```

### Обязательные поля
- **version**: Версия релиза (строка)
- **date**: Дата релиза (строка)
- **added**: Массив изменений (array of strings)

## Процесс разработки

## Совместимость

### Системные требования
- WordPress 5.8+
- PHP 7.4+
- Node.js 14+ (для разработки)

### Поддерживаемые браузеры
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## Локализация

### Поддерживаемые языки
- **Русский** (ru_RU) - по умолчанию
- **Английский** (en_US)

### Структура переводов
Все текстовые строки обернуты в функции `__()` и поддерживают:
- Контекст перевода ('easy-changelog')
- Множественные формы для русского языка
- Fallback на английский при отсутствии перевода

## Безопасность

### Меры защиты
- Все пользовательские данные экранируются
- JSON валидируется перед обработкой
- Проверка прав доступа (проверяется в WordPress)
- Защита от XSS через esc_html()

### Валидация данных
- Проверка JSON синтаксиса
- Убеждение что данные являются массивом
- Проверка наличия обязательных полей
- Graceful fallbacks при ошибках

## Развертывание

### Установка в production
1. Скопировать папку плагина в `/wp-content/plugins/`
2. Активировать через админ-панель WordPress
3. При необходимости скопировать собранные файлы из build/

### Рекомендуемая структура production
```
wp-content/plugins/easy-changelog/
├── easy-changelog.php
├── package.json (не обязательно)
├── build/
│   ├── index.js
│   ├── index.asset.php
│   └── style-index.css
├── src/ (не обязательно в production)
└── languages/
    ├── easy-changelog-ru_RU.mo
    ├── easy-changelog-ru_RU.json
    ├── easy-changelog-en_US.mo
    └── easy-changelog-en_US.json
```

## Возможности расширения

### Потенциальные улучшения
- Поддержка других типов изменений (fixed, deprecated, removed)
- Импорт из GitHub/GitLab
- Шаблоны для различных форматов changelog
- Экспорт в различные форматы
- Интеграция с системами CI/CD

### API для разработчиков
Блок предоставляет чистый HTML output и может быть кастомизирован через CSS. Структура классов:
- `.easy-changelog-block` - основной контейнер
- `.easy-changelog-release` - контейнер релиза
- `.easy-changelog-version` - версия
- `.easy-changelog-date` - дата
- `.easy-changelog-added` - список изменений

## Поддержка и документация

### Документация для пользователей
- Подробные инструкции по использованию в README.md
- Примеры JSON структур
- Советы по форматированию changelog

### Техническая поддержка
- Автор: Владимир Бычко (http://bychko.ru)
- Лицензия: GPL v2 или более поздняя
- Версия: 1.0.0

---

*Плагин разработан с соблюдением стандартов WordPress Codex и лучших практик безопасности.*