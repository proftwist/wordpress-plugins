(()=>{"use strict";var e,r={846:()=>{const e=window.React,r=window.wp.i18n,t=window.wp.hooks,i=window.wp.compose,o=window.wp.element,l=window.wp.blockEditor,a=window.wp.components,n=(0,e.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),(0,e.createElement)("line",{x1:"4",y1:"4",x2:"20",y2:"20",stroke:"currentColor",strokeWidth:"2"}));(0,t.addFilter)("blocks.registerBlockType","image-spoiler/add-attributes",function(e,r){return"core/image"!==r?e:{...e,attributes:{...e.attributes,isSpoiler:{type:"boolean",default:!1},spoilerText:{type:"string",default:""}}}});const s=(0,i.createHigherOrderComponent)(t=>i=>{if("core/image"!==i.name)return(0,e.createElement)(t,{...i});const{attributes:s,setAttributes:p}=i,{isSpoiler:c,spoilerText:m}=s;return(0,e.createElement)(o.Fragment,null,(0,e.createElement)(l.BlockControls,null,(0,e.createElement)(a.ToolbarButton,{icon:n,label:(0,r.__)("Спойлер","image-spoiler"),isPressed:c,onClick:()=>{p({isSpoiler:!c,spoilerText:c||m?m:(0,r.__)("Потенциально неприемлемый контент","image-spoiler")})}})),c&&(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,r.__)("Настройки спойлера","image-spoiler"),initialOpen:!0},(0,e.createElement)(a.TextControl,{label:(0,r.__)("Текст спойлера","image-spoiler"),value:m,onChange:e=>p({spoilerText:e}),help:(0,r.__)("Текст, который будет отображаться поверх размытого изображения","image-spoiler")}))),(0,e.createElement)(t,{...i}))},"withSpoilerControls");(0,t.addFilter)("editor.BlockEdit","image-spoiler/with-controls",s);const p=(0,i.createHigherOrderComponent)(r=>t=>{if("core/image"!==t.name)return(0,e.createElement)(r,{...t});const{attributes:i}=t,{isSpoiler:o,spoilerText:l}=i;if(!o)return(0,e.createElement)(r,{...t});const a={...t,className:`${t.className||""} image-spoiler-wrapper`.trim()};return(0,e.createElement)(r,{...a})},"withSpoilerSave");(0,t.addFilter)("editor.BlockListBlock","image-spoiler/with-save",p),(0,t.addFilter)("blocks.getSaveElement","image-spoiler/add-markup",function(r,t,i){if("core/image"!==t.name)return r;const{isSpoiler:o,spoilerText:l}=i;if(!o)return r;const a=r.props.children,n={...a,props:{...a.props,className:`${a.props.className||""} image-spoiler`.trim()}};return(0,e.createElement)("div",{className:"image-spoiler-wrapper"},n,l&&(0,e.createElement)("div",{className:"image-spoiler-text"},l))})}},t={};function i(e){var o=t[e];if(void 0!==o)return o.exports;var l=t[e]={exports:{}};return r[e](l,l.exports,i),l.exports}i.m=r,e=[],i.O=(r,t,o,l)=>{if(!t){var a=1/0;for(c=0;c<e.length;c++){for(var[t,o,l]=e[c],n=!0,s=0;s<t.length;s++)(!1&l||a>=l)&&Object.keys(i.O).every(e=>i.O[e](t[s]))?t.splice(s--,1):(n=!1,l<a&&(a=l));if(n){e.splice(c--,1);var p=o();void 0!==p&&(r=p)}}return r}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[t,o,l]},i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={57:0,350:0};i.O.j=r=>0===e[r];var r=(r,t)=>{var o,l,[a,n,s]=t,p=0;if(a.some(r=>0!==e[r])){for(o in n)i.o(n,o)&&(i.m[o]=n[o]);if(s)var c=s(i)}for(r&&r(t);p<a.length;p++)l=a[p],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(c)},t=globalThis.webpackChunkimage_spoiler=globalThis.webpackChunkimage_spoiler||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var o=i.O(void 0,[350],()=>i(846));o=i.O(o)})();