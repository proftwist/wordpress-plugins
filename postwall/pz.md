# Пояснительная записка - Post Wall v2.2.0

## Описание изменений

Плагин Post Wall обновлен до версии 2.2.0 с добавлением новой функциональности для выбора года и кликабельных ссылок месяцев.

## Основные улучшения

### 1. Выбор года
- Добавлен новый атрибут `selectedYear` в Gutenberg блок
- Возможность выбора между "последние 12 месяцев" и конкретным годом
- Динамические заголовки в зависимости от выбранного периода
- API поддерживает фильтрацию по годам

### 2. Кликабельные месяцы
- Ссылки на архивы постов за каждый месяц
- Hover-эффекты для улучшения UX
- Поддержка темной темы для ссылок
- Генерация правильных URL для архивов месяцев

### 3. Обновленная локализация
- Новые строки переводов для всех функций
- Поддержка русского и английского языков
- Корректные формы множественного числа для русского языка

### 4. Улучшенная архитектура
- Разделение логики по файлам согласно принципам WordPress
- Обработка ошибок и валидация данных
- Кэширование для оптимизации производительности

## Измененные файлы

### PHP файлы
- `postwall.php` - обновлена версия до 2.2.0, добавлена передача формата даты
- `includes/block-registration.php` - добавлен атрибут selectedYear
- `includes/class-postwall-api.php` - добавлена поддержка фильтрации по годам
- `includes/class-ajax-handler.php` - обновлен для передачи параметра года

### JavaScript файлы
- `assets/js/frontend.js` - добавлена логика для выбора года и кликабельных месяцев
- `build/index.js` - новый файл с редактором Gutenberg блока
- `build/frontend.js` - собранная версия фронтенд скрипта

### CSS файлы
- `build/style-index.css` - стили для фронтенда с поддержкой ссылок месяцев
- `build/index.css` - стили для редактора Gutenberg

### Файлы локализации
- `languages/postwall.pot` - шаблон переводов
- `languages/postwall-ru_RU.po` - русская локализация
- `languages/postwall-en_US.po` - английская локализация

## Удаленные файлы
- Старые JSON файлы локализации (*-*.json)
- Устаревшие .mo файлы

## Технические детали

### Новый атрибут selectedYear
```javascript
attributes: {
    selectedYear: {
        type: 'string',
        default: 'last12'
    }
}
```

### Поддерживаемые значения года
- `'last12'` - последние 12 месяцев от текущей даты
- `'2023'`, `'2022'`, etc. - конкретные годы

### Структура URL для архивов
- Месяц: `/YYYY/MM/`
- День: `/YYYY/MM/DD/`

## Совместимость
- WordPress 5.0+
- PHP 7.4+
- Gutenberg блоки

## Установка
Стандартная установка WordPress плагина. После активации блок "Post Wall" станет доступен в редакторе Gutenberg.

## Разработчик
Владимир Бычко
https://bychko.ru
bychko@ya.ru