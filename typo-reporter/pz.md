# Плагин Typo Reporter для WordPress

## Обзор
Плагин Typo Reporter позволяет пользователям сайта сообщать об опечатках и ошибках в контенте. Пользователи могут выделять текст с ошибкой и отправлять репорт авторам сайта.

## Основные возможности

### Фронтенд функционал
- **Выделение текста**: Пользователь выделяет текст с предполагаемой ошибкой на странице сайта
- **Горячая клавиша**: Нажатие `Ctrl+Enter` открывает модальное окно для отправки репорта
- **Модальное окно** содержит:
  - Поле с выделенным текстом (только для чтения)
  - Поле для описания ошибки (опционально)
  - Кнопки "Отправить репорт" и "Отмена"
- **Обратная связь**: Показ уведомлений об успешной отправке или ошибках

### Админка
- **Настройки плагина**:
  - Флаг включения/выключения функционала
  - Расположено в "Настройки" → "Typo Reporter"
- **Таблица репортов**:
  - Просмотр всех полученных репортов
  - Фильтрация по статусу (новый/исправлен/отклонен)
  - Пагинация для больших объемов данных
  - Возможность изменения статуса репорта
  - Удаление репортов
  - **Очистка всей таблицы** (с подтверждением браузера)
  - Просмотр деталей: текст, описание, URL страницы, дата создания

### База данных
- **Таблица `wp_typo_reports`**:
  - `id` - уникальный идентификатор
  - `selected_text` - выделенный пользователем текст
  - `error_description` - описание ошибки (опционально)
  - `page_url` - URL страницы с ошибкой
  - `user_ip` - IP адрес пользователя
  - `user_agent` - User-Agent браузера
  - `created_at` - дата и время создания
  - `status` - статус (new/resolved/dismissed)

## Технические требования

### Безопасность
- Валидация и санитизация всех входных данных
- Защита от XSS атак через экранирование HTML
- Проверка nonce для AJAX запросов
- Проверка прав доступа для администраторов

### Локализация
- Полная поддержка i18n
- Переводы на русский и английский языки
- JavaScript файлы также локализованы

### Производительность
- AJAX загрузка для всех действий
- Кеширование ресурсов с filemtime
- Эффективные SQL запросы с индексами

### Адаптивность
- Модальное окно адаптируется под мобильные устройства
- Таблица админки корректно отображается на всех экранах

## Структура файлов

```
typo-reporter/
├── typo-reporter.php           # Основной файл плагина
├── includes/
│   ├── class-database.php      # Работа с БД
│   ├── class-assets-manager.php # Загрузка ресурсов
│   ├── class-ajax-handler.php  # AJAX обработчики
│   └── admin-settings.php      # Настройки админки
├── assets/
│   ├── css/
│   │   ├── frontend.css        # Стили фронтенда
│   │   └── admin.css          # Стили админки
│   └── js/
│       ├── frontend.js         # JavaScript фронтенда
│       └── admin.js           # JavaScript админки
└── languages/                  # Файлы локализации
    ├── typo-reporter.pot       # Шаблон переводов
    ├── typo-reporter-ru_RU.po  # Русские переводы
    ├── typo-reporter-ru_RU.mo  # Скомпилированные русские
    ├── typo-reporter-en_US.po  # Английские переводы
    ├── typo-reporter-en_US.mo  # Скомпилированные английские
    └── *.json                  # JSON для JavaScript
```

## Установка и настройка

1. **Установка**:
   - Скачать и распаковать архив в `/wp-content/plugins/`
   - Активировать плагин в админке WordPress

2. **Настройка**:
   - Перейти в "Настройки" → "Typo Reporter"
   - Включить плагин галочкой "Enable Typo Reporter"
   - Сохранить настройки

3. **Использование**:
   - На сайте: выделить текст → нажать `Ctrl+Enter`
   - В админке: просматривать и управлять репортами

## Статусы разработки

- ✅ Основная структура плагина
- ✅ Работа с базой данных
- ✅ Фронтенд функционал
- ✅ AJAX обработчики
- ✅ Админка с настройками
- ✅ Локализация
- ✅ Тестирование
- ✅ Удаление логирования из кода
- ✅ Валидация длины описания ошибки (1000 символов)
- ✅ Функция очистки таблицы в админке

## Версия
Текущая версия: 2.0.1

## Автор
Владимир Бычко (bychko.ru)