(()=>{"use strict";var e,l={781:()=>{const e=window.React,l=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,i=window.wp.i18n,n=window.wp.primitives,r=(0,e.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(n.Path,{d:"M16.375 4.5H4.625a.125.125 0 0 0-.125.125v8.254l2.859-1.54a.75.75 0 0 1 .68-.016l2.384 1.142 2.89-2.074a.75.75 0 0 1 .874 0l2.313 1.66V4.625a.125.125 0 0 0-.125-.125Zm.125 9.398-2.75-1.975-2.813 2.02a.75.75 0 0 1-.76.067l-2.444-1.17L4.5 14.583v1.792c0 .069.056.125.125.125h11.75a.125.125 0 0 0 .125-.125v-2.477ZM4.625 3C3.728 3 3 3.728 3 4.625v11.75C3 17.273 3.728 18 4.625 18h11.75c.898 0 1.625-.727 1.625-1.625V4.625C18 3.728 17.273 3 16.375 3H4.625ZM20 8v11c0 .69-.31 1-.999 1H6v1.5h13.001c1.52 0 2.499-.982 2.499-2.5V8H20Z",fillRule:"evenodd",clipRule:"evenodd"})),m=(0,e.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(n.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),o=(0,e.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(n.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));(0,l.registerBlockType)("film/film-gallery",{title:(0,i.__)("Фотоплёнка","film"),description:(0,i.__)("Галерея в стиле фотоплёнки с горизонтальной прокруткой","film"),category:"media",icon:"images-alt2",attributes:{images:{type:"array",default:[]},height:{type:"number",default:500},linkTo:{type:"string",default:"none"},align:{type:"string",default:"none"}},supports:{align:["wide","full"]},edit:({attributes:l,setAttributes:n})=>{const{images:s,height:c,linkTo:f,align:p}=l,u=(0,t.useBlockProps)(),d=()=>{if(!wp.media)return void console.error("wp.media is not available");const e=wp.media({title:(0,i.__)("Выберите изображения","film"),multiple:!0,library:{type:"image"},button:{text:(0,i.__)("Использовать выбранные изображения","film")}});e.on("select",function(){const l=e.state().get("selection").toJSON().map(e=>({id:e.id,url:e.url,alt:e.alt||"",caption:e.caption}));n({images:l})}),e.open()},v=e=>{const l=s.filter((l,t)=>t!==e);n({images:l})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BlockControls,null,(0,e.createElement)(t.AlignmentToolbar,{value:p,onChange:e=>{n({align:void 0===e?"none":e})}}),(0,e.createElement)(a.ToolbarGroup,null,(0,e.createElement)(a.Button,{icon:r,label:(0,i.__)("Добавить/Изменить изображения","film"),onClick:d}))),(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,i.__)("Настройки фотоплёнки","film"),initialOpen:!0},(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Высота плёнки","film"),value:c,onChange:e=>n({height:e}),min:100,max:1e3,step:10}),(0,e.createElement)(a.SelectControl,{label:(0,i.__)("Ссылки на изображения","film"),value:f,options:[{label:(0,i.__)("Без ссылки","film"),value:"none"},{label:(0,i.__)("Ссылка на файл","film"),value:"media"},{label:(0,i.__)("Страница вложения","film"),value:"attachment"}],onChange:e=>n({linkTo:e})})),s.length>0&&(0,e.createElement)(a.PanelBody,{title:(0,i.__)("Сортировка изображений","film"),initialOpen:!1},(0,e.createElement)("div",{className:"film-sortable-list"},s.map((l,t)=>(0,e.createElement)("div",{key:t,className:"film-sortable-item"},(0,e.createElement)("img",{src:l.url,alt:l.alt,style:{width:"40px",height:"40px",objectFit:"cover"}}),(0,e.createElement)("div",{className:"film-sortable-info"},(0,e.createElement)("span",{className:"film-sortable-filename"},l.url.split("/").pop()),(0,e.createElement)("div",{className:"film-sortable-actions"},(0,e.createElement)(a.Button,{icon:m,isSmall:!0,onClick:()=>(e=>{if(0===e)return;const l=[...s];[l[e-1],l[e]]=[l[e],l[e-1]],n({images:l})})(t),disabled:0===t,label:(0,i.__)("Поднять выше","film")}),(0,e.createElement)(a.Button,{icon:o,isSmall:!0,onClick:()=>(e=>{if(e===s.length-1)return;const l=[...s];[l[e],l[e+1]]=[l[e+1],l[e]],n({images:l})})(t),disabled:t===s.length-1,label:(0,i.__)("Опустить ниже","film")}),(0,e.createElement)(a.Button,{isDestructive:!0,isSmall:!0,onClick:()=>v(t),label:(0,i.__)("Удалить","film")},"×")))))))),(0,e.createElement)("div",{...u},(0,e.createElement)("div",{className:"film-gallery-editor",style:{height:c+"px"}},0===s.length?(0,e.createElement)("div",{className:"film-placeholder"},(0,e.createElement)("p",null,(0,i.__)("Добавьте изображения в фотоплёнку","film")),(0,e.createElement)(a.Button,{isPrimary:!0,onClick:d},(0,i.__)("Выберите изображения","film"))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"film-strip"},s.map((l,t)=>(0,e.createElement)("div",{key:t,className:"film-frame"},(0,e.createElement)("img",{src:l.url,alt:l.alt}),(0,e.createElement)("div",{className:"film-frame-overlay"},(0,e.createElement)("span",{className:"film-frame-number"},t+1),(0,e.createElement)(a.Button,{className:"film-remove-image",isSmall:!0,isDestructive:!0,onClick:()=>v(t),label:(0,i.__)("Удалить изображение","film")},"×"))))),(0,e.createElement)("div",{style:{marginTop:"10px",textAlign:"center"}},(0,e.createElement)(a.Button,{isSecondary:!0,onClick:d},(0,i.__)("Добавить/Заменить изображения","film")))))))},save:()=>null})}},t={};function a(e){var i=t[e];if(void 0!==i)return i.exports;var n=t[e]={exports:{}};return l[e](n,n.exports,a),n.exports}a.m=l,e=[],a.O=(l,t,i,n)=>{if(!t){var r=1/0;for(c=0;c<e.length;c++){for(var[t,i,n]=e[c],m=!0,o=0;o<t.length;o++)(!1&n||r>=n)&&Object.keys(a.O).every(e=>a.O[e](t[o]))?t.splice(o--,1):(m=!1,n<r&&(r=n));if(m){e.splice(c--,1);var s=i();void 0!==s&&(l=s)}}return l}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,i,n]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};a.O.j=l=>0===e[l];var l=(l,t)=>{var i,n,[r,m,o]=t,s=0;if(r.some(l=>0!==e[l])){for(i in m)a.o(m,i)&&(a.m[i]=m[i]);if(o)var c=o(a)}for(l&&l(t);s<r.length;s++)n=r[s],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},t=globalThis.webpackChunkfilm_gallery=globalThis.webpackChunkfilm_gallery||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var i=a.O(void 0,[350],()=>a(781));i=a.O(i)})();