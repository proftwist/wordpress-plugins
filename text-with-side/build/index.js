(()=>{"use strict";const e=window.React,{registerBlockType:t}=wp.blocks,{RichText:i,MediaUpload:a,InspectorControls:l}=wp.blockEditor,{PanelBody:n,SelectControl:s,TextControl:m,Button:d}=wp.components,{__}=wp.i18n;t("text-with-side/text-with-side",{title:__("Text with Side","text-with-side"),description:__("Text block with side image that floats in margins on frontend","text-with-side"),category:"common",icon:"align-left",attributes:{content:{type:"string",default:""},imageId:{type:"number",default:0},imageUrl:{type:"string",default:""},imageAlt:{type:"string",default:""},position:{type:"string",default:"left"},imageLink:{type:"string",default:"none"},width:{type:"string",default:"150px"}},edit:({attributes:t,setAttributes:r})=>{const{content:o,imageUrl:c,imageAlt:h,position:g,imageLink:w,width:x}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l,null,(0,e.createElement)(n,{title:__("Block Settings","text-with-side")},(0,e.createElement)(s,{label:__("Display Position on Frontend","text-with-side"),value:g,options:[{label:__("Left","text-with-side"),value:"left"},{label:__("Right","text-with-side"),value:"right"}],onChange:e=>r({position:e})}),(0,e.createElement)(s,{label:__("Image Link","text-with-side"),value:w,options:[{label:__("None","text-with-side"),value:"none"},{label:__("To Media File","text-with-side"),value:"media"},{label:__("To Attachment Page","text-with-side"),value:"attachment"}],onChange:e=>r({imageLink:e})}),(0,e.createElement)(m,{label:__("Image Width on Frontend","text-with-side"),value:x,onChange:e=>r({width:e}),help:__("Default: 150px","text-with-side")}))),(0,e.createElement)("div",{className:`text-with-side-block text-with-side-${g}`,"data-position":g},(0,e.createElement)("div",{className:"text-with-side-inner"},c&&(0,e.createElement)("div",{className:"text-with-side-image"},(0,e.createElement)("img",{src:c,alt:h,style:{width:"100%",maxWidth:"300px"}}),(0,e.createElement)(d,{className:"remove-image",onClick:()=>{r({imageId:0,imageUrl:"",imageAlt:""})},isSmall:!0,isDestructive:!0},__("Remove Image","text-with-side"))),!c&&(0,e.createElement)(a,{onSelect:e=>{r({imageId:e.id,imageUrl:e.url,imageAlt:e.alt})},type:"image",render:({open:t})=>(0,e.createElement)(d,{className:"add-image",onClick:t,isPrimary:!0,style:{width:"100%",maxWidth:"300px",margin:"0 auto",display:"block"}},__("Add Image","text-with-side"))}),(0,e.createElement)("div",{className:"text-with-side-content"},(0,e.createElement)(i,{tagName:"div",value:o,onChange:e=>r({content:e}),placeholder:__("Enter your text here...","text-with-side"),multiline:"p"}))),(0,e.createElement)("div",{className:"text-with-side-editor-notice"},__("On frontend this block will float in the ","text-with-side"),(0,e.createElement)("strong",null,__("left"===g?"left margin":"right margin","text-with-side")),__(" with width: ","text-with-side"),(0,e.createElement)("strong",null,x))))},save:({attributes:t})=>{const{content:a,imageUrl:l,imageAlt:n,position:s,imageLink:m,width:d}=t;if(!a&&!l)return null;let r=null;return l&&(r=(0,e.createElement)("img",{src:l,alt:n,style:{width:d}}),r="media"===m&&t.imageId||"attachment"===m&&t.imageId?(0,e.createElement)("a",{href:"#",className:"text-with-side-image-link"},r):(0,e.createElement)("div",{className:"text-with-side-image-link"},r)),(0,e.createElement)("div",{className:`text-with-side-block text-with-side-${s}`},(0,e.createElement)("div",{className:"text-with-side-inner"},l&&(0,e.createElement)("div",{className:"text-with-side-image"},r),a&&(0,e.createElement)("div",{className:"text-with-side-content"},(0,e.createElement)(i.Content,{tagName:"div",value:a}))))}})})();