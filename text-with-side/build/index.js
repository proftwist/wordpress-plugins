(()=>{"use strict";const e=window.React,t=window.wp.blocks,i=window.wp.blockEditor,a=window.wp.components,l=window.wp.i18n;(0,t.registerBlockType)("text-with-side/text-with-side",{title:(0,l.__)("Text with Side","text-with-side"),description:(0,l.__)("Text block with optional side image","text-with-side"),category:"common",icon:"align-left",attributes:{content:{type:"string",default:""},imageId:{type:"number",default:0},imageUrl:{type:"string",default:""},imageAlt:{type:"string",default:""},position:{type:"string",default:"left"},imageLink:{type:"string",default:"none"},width:{type:"string",default:"150px"}},edit:({attributes:t,setAttributes:n})=>{const{content:s,imageUrl:m,imageAlt:d,position:o,imageLink:r,width:c}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,l.__)("Block Settings","text-with-side")},(0,e.createElement)(a.SelectControl,{label:(0,l.__)("Display Position","text-with-side"),value:o,options:[{label:(0,l.__)("Left","text-with-side"),value:"left"},{label:(0,l.__)("Right","text-with-side"),value:"right"}],onChange:e=>n({position:e})}),(0,e.createElement)(a.SelectControl,{label:(0,l.__)("Image Link","text-with-side"),value:r,options:[{label:(0,l.__)("None","text-with-side"),value:"none"},{label:(0,l.__)("To Media File","text-with-side"),value:"media"},{label:(0,l.__)("To Attachment Page","text-with-side"),value:"attachment"}],onChange:e=>n({imageLink:e})}),(0,e.createElement)(a.TextControl,{label:(0,l.__)("Image Width","text-with-side"),value:c,onChange:e=>n({width:e}),help:(0,l.__)("Default: 150px","text-with-side")}))),(0,e.createElement)("div",{className:`text-with-side-block text-with-side-${o}`},m&&(0,e.createElement)("div",{className:"text-with-side-image"},(0,e.createElement)("img",{src:m,alt:d,style:{width:c}}),(0,e.createElement)(a.Button,{className:"remove-image",onClick:()=>{n({imageId:0,imageUrl:"",imageAlt:""})},isSmall:!0,isDestructive:!0},(0,l.__)("Remove Image","text-with-side"))),!m&&(0,e.createElement)(i.MediaUpload,{onSelect:e=>{n({imageId:e.id,imageUrl:e.url,imageAlt:e.alt})},type:"image",render:({open:t})=>(0,e.createElement)(a.Button,{className:"add-image",onClick:t},(0,l.__)("Add Image","text-with-side"))}),(0,e.createElement)("div",{className:"text-with-side-content"},(0,e.createElement)(i.RichText,{tagName:"div",value:s,onChange:e=>n({content:e}),placeholder:(0,l.__)("Enter your text here...","text-with-side"),multiline:"p"}))))},save:({attributes:t})=>{const{content:a,imageUrl:l,imageAlt:n,position:s,imageLink:m,width:d}=t;if(!a&&!l)return null;let o=null;return l&&(o=(0,e.createElement)("img",{src:l,alt:n,style:{width:d}}),"media"===m&&t.imageId?o=(0,e.createElement)("a",{href:wp.media.attachment(t.imageId).get("url")},o):"attachment"===m&&t.imageId&&(o=(0,e.createElement)("a",{href:wp.url.postLink(t.imageId)},o))),(0,e.createElement)("div",{className:`text-with-side-block text-with-side-${s}`},l&&(0,e.createElement)("div",{className:"text-with-side-image"},o),a&&(0,e.createElement)("div",{className:"text-with-side-content"},(0,e.createElement)(i.RichText.Content,{tagName:"div",value:a})))}})})();